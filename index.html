<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etch-A-Sketch</title>
    
    <style>
    
    	body {
    		display: flex;
    		flex-direction: column;
    		justify-content: center;
    		align-items: center;
		height: 100vh;
    	}
    	
    	.button {
    		font-size: 20px;
    		border: 2px solid blue;
    		border-radius: 5px;
    		margin: 40px;
    	}
    	
    	.container {
		border: 10px solid red;
		width : 40vw;
		height: 40vw;
		display: flex;
		flex-wrap: wrap;
    	}
    	
    	.square {
    		border: 1px solid black;
    	}
    
    </style>
    
</head>

<body>

	<button class="button">Generate your own grid!</button>
	<div class="container"></div>
	
	<script>
	
		const container = document.querySelector('.container');
		
		const button = document.querySelector(".button");
		button.addEventListener('click', event => {
			let squaresPerSideChoice = parseInt(prompt("How many squares per side do you want?", "No more than 100 please!"));
			buildGrid(squaresPerSideChoice);
		});
		
		function buildGrid(squaresPerSide) {
			if(squaresPerSide >= 1 && squaresPerSide <= 100) {
				container.innerHTML = "";
				const squareWidth = 100 / squaresPerSide;	
				const numberOfSquares = squaresPerSide ** 2;
				container.style.backgroundColor = "black";
				for(i = 0; i < numberOfSquares; i++) {
					const square = document.createElement('div');
					square.addEventListener('mouseenter', function(event) {
					colorizeSquare(square);
					});
					square.className = 'square';
					square.style.width = `calc(${squareWidth}% - 2px)`;
					square.style.height = `calc(${squareWidth}% - 2px)`;
					square.style.backgroundColor = "white";
					container.appendChild(square);
				};
			} else {
				alert("You're a fucking moron!");
			}
		};
		
		function colorizeSquare(square) {
			console.log (square.style.backgroundColor);
			if(square.style.backgroundColor === "white"){
				const randomHue = Math.random() * 360;
				square.style.backgroundColor = `hsl(${randomHue}deg 100% 50%)`;
				square.style.opacity = 1;
			} else {
				square.style.opacity -= 0.1;
			}
		};
				
		
		
	</script>
    
</body>
</html>
